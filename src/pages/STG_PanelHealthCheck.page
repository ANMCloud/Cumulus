<apex:page controller="STG_PanelHealthCheck_CTRL" >

    <apex:form id="form">   
        <apex:sectionHeader title="{!$Label.stgNavSystem}" subtitle="Health Check" />        
        <apex:pageMessages id="pageMessages"/>
        <apex:pageBlock id="pbDetector" mode="maindetail">
  
            <h3 class="sectionBar" >Health Check</h3>
            <apex:outputPanel layout="block" styleClass="sectionHelp">
                    Use this page to detect any problems in your NPSP settings. 
            </apex:outputPanel>
            
            <apex:outputPanel id="panelResults">
                <apex:outputText value="{!strTimeMessage}" rendered="{!hasResults}" /><br/><br/>
                
                <apex:dataTable value="{!listDR}" var="dr" rendered="{!hasResults}" rules="all">
                    <apex:column >           
                         <apex:facet name="header">Test</apex:facet>
                         <apex:outputText value="{!dr.strName}" style="font-weight:bold;"/>         
                    </apex:column>
                    <apex:column >           
                         <apex:facet name="header">Status</apex:facet>
                         <apex:outputText value="{!dr.strStatus}" style="color:{!IF(dr.strStatus='Error','red', 'blue')};" />          
                    </apex:column>
                    <apex:column >           
                         <apex:facet name="header">Details</apex:facet>
                         <apex:outputText value="{!dr.strDetails}" escape="false" />          
                    </apex:column>
                    <apex:column >           
                         <apex:facet name="header">Solution</apex:facet>
                         <apex:outputText value="{!dr.strSolution}"/>          
                    </apex:column>                
                </apex:dataTable> 
                 
            </apex:outputPanel> 
            
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton id="btnRun" value="Run Health Check" status="statusLoad" action="{!runDetector}" immediate="true" rerender="panelResults" />
            </apex:pageBlockButtons>
                                    
        </apex:pageBlock>
    </apex:form>
</apex:page>